{% assign section_setting = section.settings  %}
{% assign blocks = section.blocks %}
{% assign highlightheading = section_setting.highlightheading %}

<div class="container">
<section class="productHighlights">
<h1>{{ highlightheading}}</h1>
  <div class="highlights__flex">

    {% if blocks %}
      {% for block in blocks %}
        {% assign block_settings = block.settings %}
        {% assign highlight_image = block_settings.highlight_image %}
        {% assign highlight_link = block_settings.highlight_link %}
        {% assign highlight_title = block_settings.highlight_title %}
        {% assign highlight_subheading = block_settings.highlight_subheading %}
        {% assign product = all_products[block_settings.product] %}
        {% assign product_image = product.featured_image %}
        {% assign product_url = product.url %}
        {% assign product_title = product.title %}
        {% assign product_price = product.price %}

        <div class="highlight__highlights">
          <a href="{{ highlight_link }}">
            <img src="{{ highlight_image | img_url: 'master' }}"/>
          <h2>{{ highlight_title }}</h2>
          <h4>{{ highlight_subheading }}</h4>
          </a>
        </div>
      {% endfor %}
    {% endif %}
<div class="highlight__highlights-mobile">
         <div class="showSlide fade">
         <img src="{{ highlight_image | img_url: 'master' }}"/>
        <h2>{{ highlight_title }}</h2>
        <h4>{{ highlight_subheading }}</h4>
      </div>
      <div class="showSlide fade">
        <img src="{{ highlight_image | img_url: 'master' }}"/>
        <h2>{{ highlight_title }}</h2>
        <h4>{{ highlight_subheading }}</h4>
      </div>

      <div class="showSlide fade">
         <img src="{{ highlight_image | img_url: 'master' }}"/>
        <h2>{{ highlight_title }}</h2>
        <h4>{{ highlight_subheading }}</h4>
      </div>
      <a class="left" onclick="nextSlide(-1)">❮</a>
      <a class="right" onclick="nextSlide(1)">❯</a>
        </div>
  </div>
</section>
</div>

{% stylesheet %}
    .productHighlights{
        padding: 30px 0;    
    }
    .productHighlights h1{
      color: #808284;
      font-size: 2rem;
      letter-spacing: 1px;
      padding: 10px 0;
    }
    .highlights__flex{
        display: flex;
        justify-content: space-between;
    }
    .highlight__highlights{
        width: 32%;
    }
    .highlight__highlights a{
      color: black;
      text-align: left;
    }
    .highlight__highlights h2{
      padding-top: 10px;
    }
    .highlight__highlights h2,
    .highlight__highlights p,
    .highlight__highlights-mobile h2,
    .highlight__highlights-mobile p{
      color: #808284;
      font-size: 1.2rem;
      letter-spacing: 1px;
    }
    .showSlide {
        display: none;
      }
      .showSlide img {
        width: 100%;
        height: 60vh;
        object-fit: cover;
      }
      .highlight__highlights-mobile {
        max-width: 480px;
        position: relative;
        margin: auto;
        display: none;
      }
      .left,
      .right {
        cursor: pointer;
        position: absolute;
        top: 45%;
        width: auto;
        padding: 16px;
        margin-top: -22px;
        color: white;
        font-weight: bold;
        font-size: 18px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
      }
      .right {
        right: 0;
        border-radius: 3px 0 0 3px;
      }
      .left:hover,
      .right:hover {
        background-color: #808284;
      }
      .active {
        background-color: #717171;
      }
      /* Fading animation */
      .fade {
        -webkit-animation-name: fade;
        -webkit-animation-duration: 1.5s;
        animation-name: fade;
        animation-duration: 1.5s;
      }
      @-webkit-keyframes fade {
        from {
          opacity: 0.4;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fade {
        from {
          opacity: 0.4;
        }
        to {
          opacity: 1;
        }
      }
     @media (max-width: 480px) {
       .highlights__flex{
         display: inline-block;
       }
       .highlight__highlights{
         width: 100%;
         display: none;
       }
       .highlight__highlights-mobile {
        display: block;
      }
      }

{% endstylesheet %}

{% javascript %}
  var slide_index = 1;
      displaySlides(slide_index);

      function nextSlide(n) {
        displaySlides((slide_index += n));
      }

      function currentSlide(n) {
        displaySlides((slide_index = n));
      }

      function displaySlides(n) {
        var i;
        var slides = document.getElementsByClassName("showSlide");
        if (n > slides.length) {
          slide_index = 1;
        }
        if (n < 1) {
          slide_index = slides.length;
        }
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }
        slides[slide_index - 1].style.display = "block";
      }
{% endjavascript %}
{% schema %}
    {
        "name": "Product Highlights",
        "settings": [
          {
            "type": "text",
            "id": "highlightheading",
            "label": "Heading"
          }
        ],
        "blocks": [
          {
            "type": "product_highlight",
            "name": "Product highlight",
            "settings": [
              {
                  "type": "product",
                  "id": "product",
                  "label": "Product"
              },
              {
                  "type": "image_picker",
                  "id": "highlight_image",
                  "label": "Product Image"
              },
              {
                  "type": "url",
                  "id": "highlight_link",
                  "label": "Product Link"
              },
              {
                  "type": "text",
                  "id": "highlight_title",
                  "label": "Title"
              },
              {
                "type": "richtext",
                "id": "highlight_subheading",
                "label": "Subheading"
              }
            ]
          }
        ],
        "presets": [
            {
                "name": "product highlights",
                "category": "General",
                "settings": {}
            }
        ]
    }
{% endschema %}
