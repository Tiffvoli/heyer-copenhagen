{% assign section_settings = section.settings %}
{% assign preorder_text = section_settings.preorder_text %}
{% assign product_title = product.title %}
{% assign product_description = product.description %}
{% assign active_product = product.selected_or_first_available_variant %}
{% assign product_id = active_product.id %}
{% assign product_available = active_product.available %}
{% assign shipping_header = section_settings.shipping_header %}
{% assign shipping_details = section_settings.shipping_details %}
{% assign trial_header = section_settings.trial_header %}
{% assign trial_details = section_settings.trial_details %}
{% assign return_header = section_settings.return_header %}
{% assign return_details = section_settings.return_details %}
{% assign service_header = section_settings.service_header %}
{% assign service_details = section_settings.service_details %}

{% comment %} Price {% endcomment %}
{% assign product_price = active_product.price %}
{% assign product_compare_price = active_product.compare_at_price %}
<div class="product__header">
<h1 class="product_title">{{ product_title }}</h1>

<div class="product_pricing{% if class %} {{ class }}{% endif %}">
  {%- if product_price < product_compare_price -%}
    <span class="product_price">{{- product_price | money -}}</span>
    <span class="product_price product_price-sale">{{- product_compare_price | money -}}</span>
  {%- else -%}
    <span class="product_price">{{- product_price | money -}}</span>
  {%- endif -%}
</div>
</div>
<p>{{ product_description }}</p>

{% include 'product-form' with product %}
{% include 'viewer-shipping' %}
{%comment%} Return/Shipping Section {%endcomment%}
<div class="returnDetails">
    <div class="returnDetails-left">
      <h4 class="shipping-modal"><span><img src="{{ 'truck.svg' | asset_url}}"/></span>Free Shipping</h4>
      <h4 class="trial-modal"><span><img src="{{ 'trial.svg' | asset_url}}"/></span>14 days trial</h4>
    </div>
    <div class="returnDetails-right">
      <h4 class="return-modal"><span><img src="{{ 'return.svg' | asset_url}}"/></span>Easy returns</h4>
      <h4 class="service-modal"><span><img src="{{ 'service.svg' | asset_url}}"/></span>Personal service</h4>
    </div>

    {%comment%} Slide in modal {%endcomment%}
    <div class="modal" id="shippingModal">
        <div class="shipping_close modal_close"></div>
        <div class="modal-small modal_container">
          <div class="modal-container-wrapper">       
            <h2>{{shipping_header}}</h2>
            <p>{{shipping_details}}</p>       
          </div>
        </div>
    </div>
    <div class="modal" id="trialModal">
        <div class="trial_close modal_close"></div>
        <div class="modal-small modal_container">
          <div class="modal-container-wrapper">
            <h2>{{trial_header}}</h2>
            <p>{{trial_details}}</p>
          </div>
        </div>
    </div>
    <div class="modal" id="returnModal">
        <div class="return_close modal_close"></div>
        <div class="modal-small modal_container">
          <div class="modal-container-wrapper">
            <h2>{{return_header}}</h2>
            <p>{{return_details}}</p>
          </div>
        </div>
    </div>
    <div class="modal" id="serviceModal">
        <div class="service_close modal_close"></div>
          <div class="modal-small modal_container">
          <div class="modal-container-wrapper">
            <h2>{{service_header}}</h2>
            <p>{{service_details}}</p>
          </div>
        </div>
    </div>
</div>
{% include 'call-chat' %}
<style>
.modal_close{
  background: url({{'close.png' | asset_url}}) no-repeat center;
  background-size: 50% 50%;
}
</style>

<script>
var modalShipping = document.querySelector("#shippingModal");
var btnShipping = document.querySelector(".shipping-modal");
var closeShipping = document.getElementsByClassName("shipping_close")[0];

var modalTrial = document.querySelector("#trialModal");
var btnTrial = document.querySelector(".trial-modal");
var closeTrial = document.getElementsByClassName("trial_close")[0];

var modalReturn = document.querySelector("#returnModal");
var btnReturn = document.querySelector(".return-modal");
var closeReturn = document.getElementsByClassName("return_close")[0];

var modalService = document.querySelector("#serviceModal");
var btnService = document.querySelector(".service-modal");
var closeService = document.getElementsByClassName("service_close")[0];

btnShipping.onclick = function() {
  modalShipping.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
closeShipping.onclick = function() {
  modalShipping.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modalShipping) {
    modalShipping.style.display = "none";
  }
  console.log("close shipping modal")
}

btnTrial.onclick = function() {
  modalTrial.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
closeTrial.onclick = function() {
  modalTrial.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modalTrial) {
    modalTrial.style.display = "none";
  }
   console.log("close trial modal")
}

btnReturn.onclick = function() {
  modalReturn.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
closeReturn.onclick = function() {
  modalReturn.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modalReturn) {
    modalReturn.style.display = "none";
  }
   console.log("close return modal")
}

btnService.onclick = function() {
  modalService.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
closeService.onclick = function() {
  modalService.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modalService) {
    modalService.style.display = "none";
  }
   console.log("close service modal")
}

</script>


{% schema %}
  {
    "name": "Product details",
    "class": "product_details",
    "settings": [
      {
        "type": "header",
        "content": "Return & Shipping Details"
      },
      {
        "type": "text",
        "id": "shipping_header",
        "label": "Shipping header"
      },
      {
        "type": "richtext",
        "id": "shipping_details",
        "label": "Shipping details"
      },
      {
        "type": "text",
        "id": "trial_header",
        "label": "Trial header"
      },
      {
        "type": "richtext",
        "id": "trial_details",
        "label": "Trial details"
      },
      {
        "type": "text",
        "id": "return_header",
        "label": "Return header"
      },
      {
        "type": "richtext",
        "id": "return_details",
        "label": "Return details"
      },
      {
        "type": "text",
        "id": "service_header",
        "label": "Service header"
      },
      {
        "type": "richtext",
        "id": "service_details",
        "label": "Service details"
      }
    ]
  }
{% endschema %}


